<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì„œë²„ ê´€ë¦¬ í˜ì´ì§€</title>
</head>
<body>

<h1>ì„œë²„ í˜ì´ì§€</h1>

<ul id="menuList">
  <li><a id="createServerLink">ğŸ“ ì„œë²„ ìƒì„±</a></li>
  <li><a id="serverListLink">ğŸ‘¥ ì „ì²´ ì„œë²„ ëª©ë¡</a></li>
</ul>

<script>
  // âœ… í† í°ì„ URLì—ì„œ ì¶”ì¶œ
  function getTokenFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get("token");
  }

  document.addEventListener("DOMContentLoaded", function () {
    const token = getTokenFromURL();

    if (!token) {
      alert("í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
      window.location.href = "/login";
      return;
    }

    console.log("ë°›ì€ í† í°:", token);

    // âœ… ë§í¬ì— í† í° ë¶™ì´ê¸°
    const createLink = document.getElementById("createServerLink");
    const listLink = document.getElementById("serverListLink");

    createLink.href = `/server-create?token=${encodeURIComponent(token)}`;
    listLink.href = `/servers?token=${encodeURIComponent(token)}`;
  });
</script>

</body>
</html>
