<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì±„ë„ ê´€ë¦¬ í˜ì´ì§€</title>
</head>
<body>

<h1>ì±„ë„ í˜ì´ì§€</h1>

<ul id="menuList">
    <!-- ë²„íŠ¼ ëŒ€ì‹  a íƒœê·¸ë¡œ êµ¬ì„± -->
    <li><a id="createChannelLink" href="#">ğŸ“ ì±„ë„ ìƒì„±</a></li>
    <li><a id="channelListLink" href="#">ğŸ‘¥ ì „ì²´ ì±„ë„ ëª©ë¡</a></li>
</ul>

<script>
    // âœ… URL íŒŒë¼ë¯¸í„°ì—ì„œ í† í°ê³¼ ì„œë²„ ID ì¶”ì¶œ
    function getParam(key) {
        const params = new URLSearchParams(window.location.search);
        return params.get(key);
    }

    function getParams() {
        const params = new URLSearchParams(location.search);
        return {
            serverId: params.get("serverId"),
            token: params.get("token")
        };
    }

    document.addEventListener("DOMContentLoaded", () => {
        const token = getParam("token");
        const serverId = getParam("serverId");

        if (!token || !serverId) {
            alert("í† í° ë˜ëŠ” ì„œë²„ IDê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.");
            window.location.href = "/login";
            return;
        }

        // âœ… ë§í¬ ì„¤ì •
        // document.getElementById("createChannelLink").href =
        //     `/servers/${serverId}/channel-index?token=${token}`;
        //
        // document.getElementById("channelListLink").href =
        //     `/servers/${serverId}/channels?token=${token}`;
        document.getElementById("createChannelLink").href =
            `/channels/create?serverId=${serverId}&token=${token}`;

        document.getElementById("channelListLink").href =
            `/channels?serverId=${serverId}&token=${token}`;
    });

</script>

</body>
</html>
