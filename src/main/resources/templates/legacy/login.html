<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¡œê·¸ì¸</title>
  <script>
    function submitLoginForm(event) {
      event.preventDefault(); // ê¸°ë³¸ í¼ ì œì¶œ ë°©ì§€

      const userName = document.getElementById("userName").value;
      const password = document.getElementById("password").value;

      fetch('/api/users/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ userName, password })
      })
              .then(response => {
                if (!response.ok) {
                  return response.text().then(errMsg => { throw new Error(errMsg); });
                }
                return response.json();
              })
              .then(data => {
                alert("ë¡œê·¸ì¸ ì„±ê³µ!");
                // âœ… í† í°ì„ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ë©° í˜ì´ì§€ ì´ë™
                window.location.href = `/server-index?token=${encodeURIComponent(data.token)}`;
              })
              .catch(error => {
                console.error('ë¡œê·¸ì¸ ì‹¤íŒ¨:', error);
                alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + error.message);
              });
    }

    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("loginForm").addEventListener("submit", submitLoginForm);
    });
  </script>
  <link rel="stylesheet" href="/css/login.css">
</head>
<body>

<h1>ë¡œê·¸ì¸</h1>
<form id="loginForm">
  <label for="userName">ì•„ì´ë””:</label><br/>
  <input type="text" id="userName" name="userName" required><br/><br/>

  <label for="password">ë¹„ë°€ë²ˆí˜¸:</label><br/>
  <input type="password" id="password" name="password" required><br/><br/>

  <button type="submit">ë¡œê·¸ì¸</button>
</form>

<br/>
<a href="/">ğŸ  í™ˆìœ¼ë¡œ</a>
<a href="/register">ğŸ“ íšŒì›ê°€ì…</a>

</body>
</html>
